<!DOCTYPE html><html lang="en" class="text-zinc-800"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Familjen+Grotesk:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://pbes.github.io/posts/spring-cloud-functions"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script><!-- Primary Meta Tags --><title>Spring Cloud Functions haszn√°lata ¬∑ pbes blog</title><meta name="title" content="Spring Cloud Functions haszn√°lata ¬∑ pbes blog"><meta name="description" content="Els≈ëre overengineeringnek t≈±nhet, de a Spring Cloud Functions haszn√°lata, a logika √©s a deployment elk√ºl√∂n√≠t√©se sok esetben el≈ëny√∂s lehet."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://pbes.github.io/posts/spring-cloud-functions"><meta property="og:title" content="Spring Cloud Functions haszn√°lata ¬∑ pbes blog"><meta property="og:description" content="Els≈ëre overengineeringnek t≈±nhet, de a Spring Cloud Functions haszn√°lata, a logika √©s a deployment elk√ºl√∂n√≠t√©se sok esetben el≈ëny√∂s lehet."><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://pbes.github.io/posts/spring-cloud-functions"><meta property="twitter:title" content="Spring Cloud Functions haszn√°lata ¬∑ pbes blog"><meta property="twitter:description" content="Els≈ëre overengineeringnek t≈±nhet, de a Spring Cloud Functions haszn√°lata, a logika √©s a deployment elk√ºl√∂n√≠t√©se sok esetben el≈ëny√∂s lehet."><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.B12WitEq.css">
<link rel="stylesheet" href="/_astro/_slug_.D70-yzNw.css"><script type="module" src="/_astro/hoisted.Bk9VN7UM.js"></script>
<script type="module" src="/_astro/page.BNYwb576.js"></script></head> <body> <div class="flex flex-col h-full mb-8 overflow-y-scroll antialiased"> <header class="sticky z-50 top-0 bg-white/80 backdrop-blur-xl transition-all select-none bg-gradient-to-b from-orange-50"> <div class="flex flex-row gap-8 items-center justify-between max-w-screen-md mx-auto h-24 px-4 sm:px-6"> <a href="/" class="flex flex-row items-center justify-center gap-2"> <img src="/avatar.jpg" alt="author avatar" class="w-10 rounded-full aspect-square"> <span class="text-orange-600 font-title font-black">pbes blog</span> </a> <div class="flex flex-row gap-4" id="menu-items"> <a href="/posts" target="_self" class="h-full text-sm hover:text-orange-700"> Bejegyz√©sek </a><a href="/tags" target="_self" class="h-full text-sm hover:text-orange-700"> C√≠mk√©k </a><a href="/date" target="_self" class="h-full text-sm hover:text-orange-700"> Arch√≠vum </a><a href="/about" target="_self" class="h-full text-sm hover:text-orange-700"> R√≥lam </a><a href="https://github.com/pbes" target="_blank" class="h-full text-sm hover:text-orange-700"> GitHub </a> </div> </div> </header> <div class="flex-auto">  <div class="flex flex-col gap-8 md:w-5/6 px-4 py-12 sm:px-8 mx-auto"> <div class="flex flex-col gap-6 items-center justify-center max-w-screen-sm mx-auto"> <h1 id="header" class="text-5xl text-center font-title font-black">Spring Cloud Functions haszn√°lata</h1> <div class="flex items-center justify-center gap-2"> <a href="/date/2024" target="_self" class="px-2.5 py-1 rounded-lg text-xs bg-zinc-50"> December 18, 2024 </a> <a href="/tags/Java" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> Java </a><a href="/tags/Spring" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> Spring </a> </div> <p class="text-lg text-center text-zinc-700 max-w-[480px]">Els≈ëre overengineeringnek t≈±nhet, de a Spring Cloud Functions haszn√°lata, a logika √©s a deployment elk√ºl√∂n√≠t√©se sok esetben el≈ëny√∂s lehet.</p> </div> <img src="/images/spring-cloud-functions/spring-cloud-functions-cover.png?w=1200&#38;q=80" alt="cover" class="w-full max-w-screen-md mx-auto rounded-lg"> </div> <div class="relative flex flex-col gap-2 max-w-screen-md mx-auto px-4 sm:px-6 text-base text-zinc-700"> <h2 id="mi-a-spring-cloud-functions" class="text-2xl font-bold my-2"> Mi a Spring Cloud Functions? </h2>
<p> A Spring Cloud Functions egy olyan keretrendszer, amely lehet≈ëv√© teszi az √ºzleti funkci√≥ √©s a deployment sz√©tv√°laszt√°s√°t azzal, hogy egys√©ges modellbe foglalja azokat. </p>
<p> Ez √≠gy els≈ëre bonyolultnak t≈±nhet, de k√©pzelj√ºk el az al√°bbi p√©ld√°t: </p>
<ul class="list-disc ml-6"> 
<li class="mb-1"> az √ºzleti funkci√≥t Java k√≥dban √≠rjuk meg </li>
<li class="mb-1"> a logik√°t szeretn√©nk haszn√°lni:
<ul class="list-disc ml-6"> 
<li class="mb-1"> REST API-n kereszt√ºl </li>
<li class="mb-1"> AWS Lambda-n </li>
<li class="mb-1"> vagy ak√°r Kafka streamek kezel√©s√©re </li>
 </ul>
 </li>
 </ul>
<p> A Spring Cloud Functions seg√≠ts√©g√©vel ezt k√∂nnyed√©n megtehetj√ºk, a funkci√≥t egyszer √≠rjuk meg, a deployment target k√ºl√∂nb√∂z≈ë. </p>
<h2 id="n√©zz√ºnk-egy-p√©ld√°t" class="text-2xl font-bold my-2"> N√©zz√ºnk egy p√©ld√°t </h2>
<h3 id="p√©lda-alkalmaz√°s-gener√°l√°sa" class="text-xl font-bold my-2"> P√©lda alkalmaz√°s gener√°l√°sa </h3>
<p> A <a href="https://start.spring.io" href="https://start.spring.io" class="text-blue-600 after:content-['_‚Üó']" target="_blank" rel="noopener noreferrer"> https://start.spring.io </a> -n l√©trehoztam egy p√©lda projektet, amely tartalmazza a sz√ºks√©ges f√ºgg≈ës√©geket: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#24292E">&lt;</span><span style="color:#22863A">dependency</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">	&lt;</span><span style="color:#22863A">groupId</span><span style="color:#24292E">&gt;org.springframework.cloud&lt;/</span><span style="color:#22863A">groupId</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">	&lt;</span><span style="color:#22863A">artifactId</span><span style="color:#24292E">&gt;spring-cloud-function-context&lt;/</span><span style="color:#22863A">artifactId</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">&lt;/</span><span style="color:#22863A">dependency</span><span style="color:#24292E">&gt;</span></span>
<span class="line"></span></code></pre>
<p> Az √ºzleti logika ebben az esetben egy egyszer≈± <code>@Bean</code> defin√≠ci√≥ a main oszt√°lyban: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="java"><code><span class="line"><span style="color:#24292E">@</span><span style="color:#D73A49">Bean</span></span>
<span class="line"><span style="color:#D73A49">public</span><span style="color:#24292E"> Function</span><span style="color:#D73A49">&lt;</span><span style="color:#24292E">String, String</span><span style="color:#D73A49">&gt;</span><span style="color:#6F42C1"> uppercase</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#24292E"> value </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> value.</span><span style="color:#6F42C1">toUpperCase</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<h3 id="futtat√°s-lok√°lisan" class="text-xl font-bold my-2"> Futtat√°s lok√°lisan </h3>
<p> Ez √∂nmag√°ban m√©g nem csin√°l semmit. A lok√°lis futtat√°shoz a <code>FunctionCatalog</code>-t√≥l kell elk√©rn√ºnk a f√ºggv√©nyt: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="java"><code><span class="line"><span style="color:#24292E">@</span><span style="color:#D73A49">Bean</span></span>
<span class="line"><span style="color:#D73A49">public</span><span style="color:#24292E"> CommandLineRunner </span><span style="color:#6F42C1">run</span><span style="color:#24292E">(FunctionCatalog catalog) {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#24292E"> args </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        Function&lt;</span><span style="color:#D73A49">String</span><span style="color:#24292E">, </span><span style="color:#D73A49">String</span><span style="color:#24292E">&gt; uppercase </span><span style="color:#D73A49">=</span><span style="color:#24292E"> catalog.</span><span style="color:#6F42C1">lookup</span><span style="color:#24292E">(Function.class, </span><span style="color:#032F62">&quot;uppercase&quot;</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        System.out.</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(uppercase.</span><span style="color:#6F42C1">apply</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;hello&quot;</span><span style="color:#24292E">));</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<h3 id="publik√°l√°s-web-endpointk√©nt" class="text-xl font-bold my-2"> Publik√°l√°s web endpointk√©nt </h3>
<p> A f√ºggv√©nyt egyszer≈±en publik√°lhatjuk is egy URL-en. Ehhez a <code>pom.xml</code>-ben kell lecser√©lni a <code>spring-cloud-function-context</code> f√ºgg≈ës√©get a <code>spring-cloud-starter-function-web</code>-re: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#24292E">&lt;</span><span style="color:#22863A">dependency</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">    &lt;</span><span style="color:#22863A">groupId</span><span style="color:#24292E">&gt;org.springframework.cloud&lt;/</span><span style="color:#22863A">groupId</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">    &lt;</span><span style="color:#22863A">artifactId</span><span style="color:#24292E">&gt;spring-cloud-starter-function-web&lt;/</span><span style="color:#22863A">artifactId</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">&lt;/</span><span style="color:#22863A">dependency</span><span style="color:#24292E">&gt;</span></span>
<span class="line"></span></code></pre>
<div class="p-4 border rounded-lg border-zinc-100 text-sm"> 
<p> Term√©szetesen el√©rhet≈ë a Reactive Web is: <code>spring-cloud-starter-function-webflux</code> </p>
 </div>
<p> Ezut√°n a f√ºggv√©ny√ºnk m√°r el√©rhet≈ë lesz a <code>/uppercase</code> v√©gponton, a f√ºggv√©ny neve adja az URL-t. Kipr√≥b√°lhatjuk cURL-lel lok√°lisan: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">curl</span><span style="color:#005CC5"> -X</span><span style="color:#032F62"> POST</span><span style="color:#032F62"> http://localhost:8080/uppercase</span><span style="color:#005CC5"> -H</span><span style="color:#032F62"> &quot;Content-Type: text/plain&quot;</span><span style="color:#005CC5"> -d</span><span style="color:#032F62"> &quot;hello&quot;</span></span>
<span class="line"></span></code></pre>
<p> Vagy GET k√©r√©ssel is: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">curl</span><span style="color:#032F62"> http://localhost:8080/uppercase/hello</span></span>
<span class="line"></span></code></pre>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>$ curl http://localhost:8080/uppercase/test123</span></span>
<span class="line"><span>TEST123</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="saj√°t-f√ºggv√©nyek-defini√°l√°sa" class="text-xl font-bold my-2"> Saj√°t f√ºggv√©nyek defini√°l√°sa </h3>
<p> Amennyiben alkalmaz√°sunk, f√ºggv√©ny√ºnk nem ilyen egyszer≈±, hanem saj√°t oszt√°lyk√©nt defini√°ljuk, akkor: </p>
<ul class="list-disc ml-6"> 
<li class="mb-1"> a Function interf√©szt kell implement√°lnunk </li>
<li class="mb-1"> be kell √°ll√≠tanunk, hogy a Spring Cloud Functions felismerje a f√ºggv√©ny√ºnket </li>
 </ul>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="java"><code><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> CharCounter</span><span style="color:#D73A49"> implements</span><span style="color:#6F42C1"> Function</span><span style="color:#24292E">&lt;</span><span style="color:#D73A49">String</span><span style="color:#24292E">, </span><span style="color:#D73A49">Integer</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#24292E">    @</span><span style="color:#D73A49">Override</span></span>
<span class="line"><span style="color:#D73A49">    public</span><span style="color:#24292E"> Integer </span><span style="color:#6F42C1">apply</span><span style="color:#24292E">(String </span><span style="color:#E36209">s</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> s.</span><span style="color:#6F42C1">length</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<p> Az <code>application.properties</code>-ben pedig: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#D73A49">spring.cloud.function.scan.packages</span><span style="color:#24292E">=hu.pbes.blog.functionexample.implementation</span></span>
<span class="line"></span></code></pre>
<p> Ezut√°n lok√°lisan ki is pr√≥b√°lhatjuk a publik√°lt web endpointon: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">$</span><span style="color:#032F62"> curl</span><span style="color:#032F62"> http://localhost:8080/charCounter/test123</span></span>
<span class="line"><span style="color:#6F42C1">7</span></span>
<span class="line"></span></code></pre>
<h2 id="tov√°bbi-lehet≈ës√©gek" class="text-2xl font-bold my-2"> Tov√°bbi lehet≈ës√©gek </h2>
<p> Az elk√©sz√ºlt f√ºggv√©nyeinket nem csak weben publik√°lhatjuk, hiszen ennek nem sok el≈ënye lenne egy klasszikus Spring Web alkalmaz√°shoz k√©pest, hanem tetsz≈ëleges t√°mogatott √∂koszi√©m√°ban is futtathatjuk: </p>
<ul class="list-disc ml-6"> 
<li class="mb-1"> <code>spring-cloud-stream-binder-rabbit</code>, <code>spring-cloud-stream-binder-kafka</code> seg√≠ts√©g√©vel r√°akaszthatjuk RabbitMQ vagy Kafka streamekre (queue-kra, topikokra) </li>
<li class="mb-1"> az adapterek seg√≠ts√©g√©vel deployolhatjuk a f√ºggv√©nyeinket:
<ul class="list-disc ml-6"> 
<li class="mb-1"> AWS Lambda-ra: <a href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_aws_lambda" href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_aws_lambda" class="text-blue-600 after:content-['_‚Üó']" target="_blank" rel="noopener noreferrer"> https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_aws_lambda </a> </li>
<li class="mb-1"> Azure-re: <a href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_microsoft_azure_functions" href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_microsoft_azure_functions" class="text-blue-600 after:content-['_‚Üó']" target="_blank" rel="noopener noreferrer"> https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_microsoft_azure_functions </a> </li>
<li class="mb-1"> √©s Google Cloud Function-re is: <a href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_google_cloud_functions" href="https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_google_cloud_functions" class="text-blue-600 after:content-['_‚Üó']" target="_blank" rel="noopener noreferrer"> https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_google_cloud_functions </a> </li>
 </ul>
 </li>
 </ul>
<h2 id="√∂sszefoglal√°s" class="text-2xl font-bold my-2"> √ñsszefoglal√°s </h2>
<p> A Spring Cloud Functions egy k√©nyelmes eszk√∂z az √ºzleti logikai √©s a deployment elk√ºl√∂n√≠t√©s√©re. Seg√≠ts√©g√©vel ugyanaz a k√≥d futtathat√≥ webes endpointon, stream processzork√©nt vagy ak√°r serverless k√∂rnyezetben is. A fejleszt≈ë az √ºzleti logik√°ra koncentr√°lhat √©s haszn√°lhatja a Spring √∂kosziszt√©ma t√∂bbi elem√©t. </p>
<p> A teljes p√©lda projekt el√©rhet≈ë a <a href="https://github.com/pbes/function-example" href="https://github.com/pbes/function-example" class="text-blue-600 after:content-['_‚Üó']" target="_blank" rel="noopener noreferrer"> GitHub-on </a> </p> </div>  </div> <footer class="bg-gradient-to-t from-orange-50"> <div class="flex flex-row items-center justify-center max-w-screen-md h-96 mx-auto px-4 sm:px-6"> <p class="text-4xl leading-[60px] bg-clip-text text-center text-transparent bg-gradient-to-r from-orange-600 to-amber-600 font-title font-black"> Besz√©lj√ºnk a technol√≥gi√°r√≥l üöÄ </p> </div> </footer> </div> </body></html> 