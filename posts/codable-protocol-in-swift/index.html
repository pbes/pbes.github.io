<!DOCTYPE html><html lang="en" class="text-zinc-800"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Familjen+Grotesk:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://pbes.github.io/posts/codable-protocol-in-swift"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script><!-- Primary Meta Tags --><title>Codable Protocol in Swift 路 pbes blog</title><meta name="title" content="Codable Protocol in Swift 路 pbes blog"><meta name="description" content="Codable protocol allows you to encode or decode custom data types to and from formats such as JSON"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://pbes.github.io/posts/codable-protocol-in-swift"><meta property="og:title" content="Codable Protocol in Swift 路 pbes blog"><meta property="og:description" content="Codable protocol allows you to encode or decode custom data types to and from formats such as JSON"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://pbes.github.io/posts/codable-protocol-in-swift"><meta property="twitter:title" content="Codable Protocol in Swift 路 pbes blog"><meta property="twitter:description" content="Codable protocol allows you to encode or decode custom data types to and from formats such as JSON"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_slug_.Cy3YCfuz.css">
<link rel="stylesheet" href="/_astro/_slug_.D70-yzNw.css"><script type="module" src="/_astro/hoisted.Bk9VN7UM.js"></script>
<script type="module" src="/_astro/page.BNYwb576.js"></script></head> <body> <div class="flex flex-col h-full mb-8 overflow-y-scroll antialiased"> <header class="sticky z-50 top-0 bg-white/80 backdrop-blur-xl transition-all select-none bg-gradient-to-b from-orange-50"> <div class="flex flex-row gap-8 items-center justify-between max-w-screen-md mx-auto h-24 px-4 sm:px-6"> <a href="/" class="flex flex-row items-center justify-center gap-2"> <img src="/avatar.jpg" alt="author avatar" class="w-10 rounded-full aspect-square"> <span class="text-orange-600 font-title font-black">pbes blog</span> </a> <div class="flex flex-row gap-4"> <a href="/posts" target="_self" class="h-full text-sm hover:text-orange-700"> Bejegyz茅sek </a><a href="/tags" target="_self" class="h-full text-sm hover:text-orange-700"> C铆mk茅k </a><a href="/date" target="_self" class="h-full text-sm hover:text-orange-700"> Arch铆vum </a><a href="https://github.com/pbes" target="_blank" class="h-full text-sm hover:text-orange-700"> GitHub </a> </div> </div> </header> <div class="flex-auto">  <div class="flex flex-col gap-8 md:w-5/6 px-4 py-12 sm:px-8 mx-auto"> <div class="flex flex-col gap-6 items-center justify-center max-w-screen-sm mx-auto"> <h1 id="header" class="text-5xl text-center font-title font-black">Codable Protocol in Swift</h1> <div class="flex items-center justify-center gap-2"> <a href="/date/2024" target="_self" class="px-2.5 py-1 rounded-lg text-xs bg-zinc-50"> May 1, 2024 </a> <a href="/tags/swift" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> swift </a><a href="/tags/codable" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> codable </a> </div> <p class="text-lg text-center text-zinc-700 max-w-[480px]">Codable protocol allows you to encode or decode custom data types to and from formats such as JSON</p> </div> <img src="https://images.unsplash.com/photo-1579762593175-20226054cad0?w=1200&q=80" alt="cover" class="w-full max-w-screen-md mx-auto rounded-lg"> </div> <div class="relative flex flex-col gap-2 max-w-screen-md mx-auto px-4 sm:px-6 text-base text-zinc-700"> <p> In Swift, the <code>Codable</code> protocol is a type alias for the <span data-notion-identity="notion" data-notion-type="box" data-notion-color="blue" data-notion-strokewidth="1.5"> <code>Encodable</code> and <code>Decodable</code> </span> protocols: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="swift"><code><span class="line"><span style="color:#6A737D">// Declaration</span></span>
<span class="line"><span style="color:#D73A49">typealias</span><span style="color:#6F42C1"> Codable</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> Decodable </span><span style="color:#D73A49">&amp;</span><span style="color:#24292E"> Encodable</span></span>
<span class="line"></span></code></pre>
<p> The <code>Codable</code> protocol <span data-notion-identity="notion" data-notion-type="underline" data-notion-color="red" data-notion-strokewidth="1.5"> allows developers to encode or decode instances of a type to and from variety formats </span>, such as a JSON or property lists. </p>
<h2 id="basic-usage" class="text-2xl font-bold my-2"> Basic Usage </h2>
<p> To use the <code>Codable</code> protocol, <span data-notion-identity="notion" data-notion-type="highlight" data-notion-color="yellow" data-notion-strokewidth="1.5"> you need to define the types that you want to encode or decode </span>, and make them conform the <code>Codable</code> protocol: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="swift"><code><span class="line"><span style="color:#D73A49">struct</span><span style="color:#6F42C1"> User</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Codable </span><span style="color:#24292E">{</span></span>
<span class="line"><span style="color:#D73A49">    var</span><span style="color:#24292E"> name: </span><span style="color:#005CC5">String</span></span>
<span class="line"><span style="color:#D73A49">    var</span><span style="color:#24292E"> age: </span><span style="color:#005CC5">Int</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<p> The above code is defining a struct called <code>User</code> which conforms to the <code>Codable</code> protocol, which means that it can be encoded or decoded into a different formats. </p>
<p> The <code>User</code> struct has two properties: </p>
<ul class="list-disc ml-6"> 
<li class="mb-1"> A <code>name</code> of type <code>String</code> </li>
<li class="mb-1"> An <code>age</code> of type <code>Int</code> </li>
 </ul>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="swift"><code><span class="line"><span style="color:#D73A49">let</span><span style="color:#24292E"> user </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> User</span><span style="color:#24292E">(</span><span style="color:#005CC5">name</span><span style="color:#24292E">: </span><span style="color:#032F62">&quot;Alice&quot;</span><span style="color:#24292E">, </span><span style="color:#005CC5">age</span><span style="color:#24292E">: </span><span style="color:#005CC5">8</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">do</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    let</span><span style="color:#24292E"> encoder </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> JSONEncoder</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#D73A49">    let</span><span style="color:#24292E"> encodedData </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> try</span><span style="color:#24292E"> encoder.</span><span style="color:#005CC5">encode</span><span style="color:#24292E">(user)</span></span>
<span class="line"><span style="color:#005CC5">    print</span><span style="color:#24292E">(</span><span style="color:#005CC5">String</span><span style="color:#24292E">(</span><span style="color:#005CC5">bytes</span><span style="color:#24292E">: encodedData, </span><span style="color:#005CC5">encoding</span><span style="color:#24292E">: .</span><span style="color:#005CC5">utf8</span><span style="color:#24292E">) </span><span style="color:#D73A49">??</span><span style="color:#032F62"> &quot;&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#6A737D">    // &quot;{&quot;name&quot;:&quot;Alice&quot;,&quot;age&quot;:8}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    let</span><span style="color:#24292E"> decoder </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> JSONDecoder</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#D73A49">    let</span><span style="color:#24292E"> anotherUser </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> try</span><span style="color:#24292E"> decoder.</span><span style="color:#005CC5">decode</span><span style="color:#24292E">(User.</span><span style="color:#D73A49">self</span><span style="color:#24292E">, </span><span style="color:#005CC5">from</span><span style="color:#24292E">: encodedData)</span></span>
<span class="line"><span style="color:#005CC5">    print</span><span style="color:#24292E">(anotherUser)</span></span>
<span class="line"><span style="color:#6A737D">    // User(name: &quot;Alice&quot;, age: 8)</span></span>
<span class="line"><span style="color:#24292E">} </span><span style="color:#D73A49">catch</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">    print</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Error: </span><span style="color:#032F62">\(error)</span><span style="color:#032F62">&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<p> In the provided code: </p>
<ul class="list-disc ml-6"> 
<li class="mb-1"> A <code>User</code> instance is created </li>
<li class="mb-1"> A <code>JSONEncoder</code> instance is created and used to encode the <code>user</code> instance into JSON data </li>
<li class="mb-1"> A <code>JSONDecoder</code> instance is created and used to decode the JSON data back into a <code>User</code> instance </li>
<li class="mb-1"> If any errors occur during encoding or decoding, they are caught and printed in the <code>catch</code> block </li>
 </ul>
<div class="p-4 border rounded-lg border-zinc-100 text-sm"> 
<p> As can be seen in the above code snippet, the <code>encoder.encode(user)</code> method returns a value of type <code>Data</code> that contains the encoded representation of the <code>user</code> instance.
The <code>Data</code> type is used to represent a sequence of bytes. It can be used to store binary data such as image or sound files, or to encode and decode for storage or transmission. </p>
 </div>
<h2 id="custom-codable-types" class="text-2xl font-bold my-2"> Custom Codable Types </h2>
<p> In Swift, the following types are automatically conform to the <code>Codable</code> protocol: <code>String</code>, <code>Int</code>, <code>Double</code>, <code>Bool</code>, <code>URL</code>, <code>Data</code>, <code>Date</code>, <code>Array</code>, <code>Dictionary</code>. This means you can use these types as properties in a <code>Codable</code> struct or class without having to write any custom encoding or decoding logic. </p>
<p> If you want to use a custom type as a property in a <code>Codable</code> struct or class, you will need to make that type conform to <code>Codable</code> as well. </p>
<p> To add custom implementation for the <code>User</code> struct, you can define the <code>init(form decoder: Decoder) throws</code> and <code>encode(to encoder: Encoder) throws</code> functions: </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="swift"><code><span class="line"><span style="color:#D73A49">struct</span><span style="color:#6F42C1"> User</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Codable </span><span style="color:#24292E">{</span></span>
<span class="line"><span style="color:#D73A49">    var</span><span style="color:#24292E"> name: </span><span style="color:#005CC5">String</span></span>
<span class="line"><span style="color:#D73A49">    var</span><span style="color:#24292E"> age: </span><span style="color:#005CC5">Int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    enum</span><span style="color:#6F42C1"> CodingKeys</span><span style="color:#24292E">: </span><span style="color:#005CC5">String</span><span style="color:#24292E">, </span><span style="color:#6F42C1">CodingKey </span><span style="color:#24292E">{</span></span>
<span class="line"><span style="color:#D73A49">        case</span><span style="color:#005CC5"> name</span></span>
<span class="line"><span style="color:#D73A49">        case</span><span style="color:#005CC5"> age</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    init</span><span style="color:#24292E">(</span><span style="color:#6F42C1">name</span><span style="color:#24292E">: </span><span style="color:#005CC5">String</span><span style="color:#24292E">, </span><span style="color:#6F42C1">age</span><span style="color:#24292E">: </span><span style="color:#005CC5">Int</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">        self</span><span style="color:#24292E">.name </span><span style="color:#D73A49">=</span><span style="color:#24292E"> name</span></span>
<span class="line"><span style="color:#005CC5">        self</span><span style="color:#24292E">.age </span><span style="color:#D73A49">=</span><span style="color:#24292E"> age</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    init</span><span style="color:#24292E">(</span><span style="color:#6F42C1">from</span><span style="color:#24292E"> decoder: Decoder) </span><span style="color:#D73A49">throws</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">        let</span><span style="color:#24292E"> container </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> try</span><span style="color:#24292E"> decoder.</span><span style="color:#005CC5">container</span><span style="color:#24292E">(</span><span style="color:#005CC5">keyedBy</span><span style="color:#24292E">: CodingKeys.</span><span style="color:#D73A49">self</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">        name </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> try</span><span style="color:#24292E"> container.</span><span style="color:#005CC5">decode</span><span style="color:#24292E">(</span><span style="color:#005CC5">String</span><span style="color:#24292E">.</span><span style="color:#D73A49">self</span><span style="color:#24292E">, </span><span style="color:#005CC5">forKey</span><span style="color:#24292E">: .name)</span></span>
<span class="line"><span style="color:#24292E">        age </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> try</span><span style="color:#24292E"> container.</span><span style="color:#005CC5">decode</span><span style="color:#24292E">(</span><span style="color:#005CC5">Int</span><span style="color:#24292E">.</span><span style="color:#D73A49">self</span><span style="color:#24292E">, </span><span style="color:#005CC5">forKey</span><span style="color:#24292E">: .age)</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    func</span><span style="color:#6F42C1"> encode</span><span style="color:#24292E">(</span><span style="color:#6F42C1">to</span><span style="color:#24292E"> encoder: Encoder) </span><span style="color:#D73A49">throws</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">        var</span><span style="color:#24292E"> container </span><span style="color:#D73A49">=</span><span style="color:#24292E"> encoder.</span><span style="color:#005CC5">container</span><span style="color:#24292E">(</span><span style="color:#005CC5">keyedBy</span><span style="color:#24292E">: CodingKeys.</span><span style="color:#D73A49">self</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">        try</span><span style="color:#24292E"> container.</span><span style="color:#005CC5">encode</span><span style="color:#24292E">(name, </span><span style="color:#005CC5">forKey</span><span style="color:#24292E">: .name)</span></span>
<span class="line"><span style="color:#D73A49">        try</span><span style="color:#24292E"> container.</span><span style="color:#005CC5">encode</span><span style="color:#24292E">(age, </span><span style="color:#005CC5">forKey</span><span style="color:#24292E">: .age)</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre>
<ul class="list-disc ml-6"> 
<li class="mb-1"> The <code>CodingKeys</code> enum defines the keys for the <strong class="font-bold"> name </strong> and <strong class="font-bold"> age </strong> properties. These keys are used to map the properties to their corresponding values when coding and decoding </li>
<li class="mb-1"> The <code>init(from decoder: Decoder) throws</code> initializer is a special initializer defined by the <code>Codable</code> protocol. Its used to initialize a <code>User</code> instance by decoding it from a <code>Decoder</code> instance. The <code>Decoder</code> instance contains the serialized representation of the <code>User</code> instance. </li>
<li class="mb-1"> The <code>func encode(to encoder: Encoder) throws</code> function is also defined by the Codable protocol. Its used to encode the <code>User</code> instance to an <code>Encoder</code> instance, which will contain the serialized representation of the <code>User</code> instance </li>
 </ul>
<h2 id="conclusion" class="text-2xl font-bold my-2"> Conclusion </h2>
<ul class="list-disc ml-6"> 
<li class="mb-1"> The <code>Codable</code> protocol allows you to encode and decode custom types to and from a serialized representation, such as JSON </li>
<li class="mb-1"> To conform the <code>Codable</code> protocol, you can define the custom type as a property in a <code>Codable</code> struct or class </li>
 </ul> </div>  </div> <footer class="bg-gradient-to-t from-orange-50"> <div class="flex flex-row items-center justify-center max-w-screen-md h-96 mx-auto px-4 sm:px-6"> <p class="text-4xl leading-[60px] bg-clip-text text-center text-transparent bg-gradient-to-r from-orange-600 to-amber-600 font-title font-black"> Let&#39;s build a 1B unicorn  </p> </div> </footer> </div> </body></html> 